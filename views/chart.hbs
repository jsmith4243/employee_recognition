<html lang="en">

  <title>{{title}}</title>
  
  <link rel ='stylesheet' href='stylesheets/style.css' />
  
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
  
  <!-- Latest compiled and minified CSS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

  <!-- Optional theme -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">

  <!-- Latest compiled and minified JavaScript -->
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
 

  <!--Load the AJAX API-->
  <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
  <script type="text/javascript">
    
    // Load the Visualization API and the corechart package.
    google.charts.load('current', {'packages':['corechart']}); 
    
    // Set a callback to run when the Google Visualization API is loaded.
    google.charts.setOnLoadCallback(drawChart);

    google.charts.setOnLoadCallback(drawChart2);
    

    // Callback that creates and populates a data table,
    // instantiates the pie chart, passes in the data and
    // draws it.
    function drawChart() {

        //var json = "{{json}}";
        //var jsonstring = JSON.stringify( {{json}} );
        //var arr = JSON.parse( json );
        //console.log("{{json}}")
        //console.log(json);

        


        var httpRequest = new XMLHttpRequest();
        
        
        if (!httpRequest) {
          alert('Giving up :( Cannot create an XMLHTTP instance');
          return false;
        }




        httpRequest.onreadystatechange = function(){
        
          if (httpRequest.readyState === XMLHttpRequest.DONE) 
          {
          
            if (httpRequest.status === 200) 
            {

              //alert(httpRequest.responseText); //if its json you call JSON parse to get a json object which is same as javascript object


              var arr = JSON.parse(httpRequest.responseText);

              // Create the data table.
              var data = new google.visualization.DataTable();
              data.addColumn('string', 'Topping');
              data.addColumn('number', 'Slices');
              /*
              data.addRows([
                ['Mushrooms', 3],
                ['Onions', 1],
                ['Olives', 1],
                ['Zucchini', 1],
                ['Pepperoni', 2]
              ]);
              */
        


              var username;
              var awardcount;

              for(i = 0; i < arr.length; i++)
              {

                //arr[i].id

                username = arr[i].username;

                awardcount = arr[i].awardcount
                //awardcount = i;

                data.addRows([

                  [arr[i].username, awardcount]

                ]);


              }

              // Set chart options
              var options = {'title':'Number Of Awards Awarded To Employees By User That Awarded Them',
                       'width':400,
                       'height':300};



              // Instantiate and draw our chart, passing in some options.
              var chart = new google.visualization.PieChart(document.getElementById('chart_div'));
              chart.draw(data, options);
        
              



                
            } 
              
            else 
              
              
            {
              
              alert('There was a problem with the request.');
                
            }
          }
        
        
        };


        httpRequest.open('POST', '/getuserawardcount', true);

        httpRequest.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
      
        httpRequest.send();


    

        
    }
  
  

    function drawChart2() {

        //var json = "{{json}}";
        //var jsonstring = JSON.stringify( {{json}} );
        //var arr = JSON.parse( json );
        //console.log("{{json}}")
        //console.log(json);

        


        var httpRequest = new XMLHttpRequest();
        
        
        if (!httpRequest) {
          alert('Giving up :( Cannot create an XMLHTTP instance');
          return false;
        }




        httpRequest.onreadystatechange = function(){
        
          if (httpRequest.readyState === XMLHttpRequest.DONE) 
          {
          
            if (httpRequest.status === 200) 
            {

              //alert(httpRequest.responseText); //if its json you call JSON parse to get a json object which is same as javascript object


              var arr = JSON.parse(httpRequest.responseText);

              // Create the data table.
              var data = new google.visualization.DataTable();
              data.addColumn('string', 'Topping');
              data.addColumn('number', 'Slices');
              /*
              data.addRows([
                ['Mushrooms', 3],
                ['Onions', 1],
                ['Olives', 1],
                ['Zucchini', 1],
                ['Pepperoni', 2]
              ]);
              */
        


              var username;
              var awardcount;

              for(i = 0; i < arr.length; i++)
              {

                //arr[i].id

                username = arr[i].username;

                awardcount = arr[i].awardcount
                //awardcount = i;

                data.addRows([

                  [arr[i].username, awardcount]

                ]);


              }

              // Set chart options
              var options = {'title':'Number Of Awards Awarded To Employees By Employee That Received Them',
                       'width':400,
                       'height':300};



              // Instantiate and draw our chart, passing in some options.
              var chart = new google.visualization.PieChart(document.getElementById('chart_div2'));
              chart.draw(data, options);
        
              



                
            } 
              
            else 
              
              
            {
              
              alert('There was a problem with the request.');
                
            }
          }
        
        
        };


        httpRequest.open('POST', '/getemployeeawardcount', true);

        httpRequest.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
      
        httpRequest.send();


    

        
    }
  
  

  
  </script>


  <body>
  
    <h1>{{title}}</h1>
   




    <div class="btn-group" role="group" aria-label="...">
      <a href="http://localhost:3000/"><button type="button" class="btn btn-default">Log Out</button></a>
      <a href="http://localhost:3000/userSettings"><button type="button" class="btn btn-default">User Settings</button></a>
      
    </div>
    
    <div id="chart_div">
    
    </div>


    <div id="chart_div2">
    
    </div>
    
  </body>
<html>